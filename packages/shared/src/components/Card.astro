---
export interface Props {
  title: string;
  description?: string;
  image?: string;
  href?: string;
  variant?: 'default' | 'glass' | 'gradient' | 'outline';
  tag?: string;
}

const { title, description, image, href, variant = 'default', tag } = Astro.props;

const baseClasses =
  'group relative overflow-hidden rounded-xl transition-all duration-300 hover:scale-[1.02]';

const variantClasses = {
  default: 'backdrop-blur-md border shadow-lg hover:shadow-xl',
  glass: 'backdrop-blur-lg border hover:shadow-xl',
  gradient: 'backdrop-blur-md border shadow-lg hover:shadow-xl',
  outline: 'backdrop-blur-md border-2 hover:shadow-xl',
};

const variantStyles = {
  default: 'background: var(--cs-glass-bg-light); border-color: var(--cs-glass-border-light);',
  glass: 'background: var(--cs-glass-bg-medium); border-color: var(--cs-glass-border-medium);',
  gradient:
    'background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2)); border-color: var(--cs-glass-border-lg);',
  outline: 'background: var(--cs-glass-bg-xs); border-color: var(--cs-glass-border-strong);',
};

const Wrapper = href ? 'a' : 'div';
---

<Wrapper
  href={href}
  class={`${baseClasses} ${variantClasses[variant]} block`}
  style={variantStyles[variant]}
>
  {
    image && (
      <div class="aspect-[16/9] overflow-hidden bg-slate-100 dark:bg-slate-900">
        <img
          src={image}
          alt={title}
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
        />
      </div>
    )
  }

  <div class="p-6">
    {
      tag && (
        <span
          class="inline-block px-3 py-1 text-xs font-semibold rounded-full backdrop-blur-sm mb-3"
          style="background: rgba(255, 255, 255, 0.3); color: white; border: 1px solid rgba(255, 255, 255, 0.4);"
        >
          {tag}
        </span>
      )
    }

    <h3 class="text-xl font-bold text-white mb-2 group-hover:text-white/80 transition-colors">
      {title}
    </h3>

    {description && <p class="text-white/90 line-clamp-3">{description}</p>}

    <slot />

    {
      href && (
        <div class="mt-4 flex items-center text-white font-medium">
          <span>Read more</span>
          <svg
            class="ml-2 w-4 h-4 transition-transform group-hover:translate-x-1"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </div>
      )
    }
  </div>

  {/* Hover effect overlay for gradient variant */}
  {
    variant === 'gradient' && (
      <div class="absolute inset-0 bg-gradient-to-br from-purple-400/0 to-pink-400/0 group-hover:from-purple-400/10 group-hover:to-pink-400/10 transition-all duration-300 pointer-events-none" />
    )
  }
</Wrapper>
