---
import type { ImageMetadata } from 'astro';

export interface Props {
  src: ImageMetadata | string;
  alt: string;
  width?: number;
  height?: number;
  loading?: 'lazy' | 'eager';
  class?: string;
  sizes?: string;
}

const {
  src,
  alt,
  width,
  height,
  loading = 'lazy',
  class: className = '',
  sizes
} = Astro.props;

// Use native img tag for maximum compatibility
const imgAttrs: Record<string, any> = {
  src: typeof src === 'string' ? src : src.src,
  alt,
  loading,
  class: className,
};

if (width) imgAttrs.width = width;
if (height) imgAttrs.height = height;
if (sizes) imgAttrs.sizes = sizes;
---

<img {...imgAttrs} />
